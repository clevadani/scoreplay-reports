(this.webpackJsonpscoreplay=this.webpackJsonpscoreplay||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},238:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(10),o=a.n(c),l=(a(104),a(105),a(247)),s=function(){return r.a.createElement(l.a,{bg:"light",expand:"lg"},r.a.createElement(l.a.Brand,{href:"#home"},"Scoreplay Monitor"),r.a.createElement(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(l.a.Collapse,{id:"basic-navbar-nav"}))},i=a(50),u=a.n(i),d=a(88),m=a(11),b=a(243),p=a(244),g=a(95),h=a(246),f=a(248),v=a(245),y=a(51),E=a.n(y),j=a(17),O=a.n(j),k=a(14),D=a(15);function C(){return Math.floor(256*Math.random())}function S(e,t){for(var a=[],n=0;n<e;n++)a.push("rgba(".concat(C(),", ").concat(C(),", ").concat(C(),", ").concat(t,")"));return a}var M=function(e){var t=e.data,a=Object.values(t),n={labels:Object.keys(t),datasets:[{label:"Number of events per product",data:a,backgroundColor:S(a.length,.4),borderWidth:2,borderColor:S(a.length,1)}]};return r.a.createElement(D.c,null,r.a.createElement("h3",{className:"mt-5"},"Events"),r.a.createElement(k.a,{data:n,options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{barPercentage:1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)"}}],yAxes:[{gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)"},ticks:{beginAtZero:!0}}]}}}))},x=function(e){var t=e.data,a=e.data2,n=e.startDate,c=e.endDate,o=e.rangeStart,l={},s=Object.keys(t),i=Object.keys(a);(s.length>i.length?s:i).map((function(e){if(t[e]&&a[e]){var n=t[e]+a[e],r=Math.abs(t[e]-a[e]);l[e]=Math.ceil(r/n*100)}else l[e]=100;return e}));var u=Object.values(l),d={labels:Object.keys(l),datasets:[{label:"% change with previous date range",data:u,fill:!1,backgroundColor:S(u.length,.4),borderColor:S(u.length,1),borderWidth:1}]};return r.a.createElement(D.c,null,r.a.createElement("h3",{className:"mt-5"},"Percentage change with previous date range"),r.a.createElement("p",null,o.split(" ")[0]," - ",n," and ",n," - ",c),r.a.createElement(k.b,{data:d,options:{responsive:!0}}))},_=function(e){var t=e.data,a=Object.values(t),n={labels:Object.keys(t),datasets:[{label:"My First dataset",fill:!0,lineTension:.3,backgroundColor:"rgba(225, 204,230, .3)",borderColor:"rgb(205, 130, 158)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgb(205, 130,1 58)",pointBackgroundColor:"rgb(255, 255, 255)",pointBorderWidth:10,pointHoverRadius:5,pointHoverBackgroundColor:"rgb(0, 0, 0)",pointHoverBorderColor:"rgba(220, 220, 220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:a}]};return r.a.createElement(D.c,null,r.a.createElement("h3",{className:"mt-5"},"Total revenue"),r.a.createElement(k.c,{data:n,options:{responsive:!0}}))},w=function(e){var t=e.data,a=e.data2,n=e.startDate,c=e.endDate,o=e.rangeStart,l=e.revenue,s=e.revenue2,i=Object.keys(t),u=Object.keys(a),d={},m={};i.map((function(e){return d[e]=Math.floor(l[e]/t[e]),e})),u.map((function(e){return m[e]=Math.floor(s[e]/a[e]),e}));var b=Object.keys(d),p=Object.keys(m),g=b.length>p.length?b:p,h={};g.map((function(e){if(t[e]&&a[e]){var n=d[e]+m[e],r=Math.abs(d[e]-m[e]);h[e]=Math.floor(r/n*100)}else h[e]=100;return e}));var f=Object.values(h),v={labels:Object.keys(h),datasets:[{label:"% change with previous date range",data:f,backgroundColor:S(f.length,.4),borderWidth:2,borderColor:S(f.length,1)}]};return r.a.createElement(D.c,null,r.a.createElement("h3",{className:"mt-5"},"Average yield per product"),r.a.createElement("p",null,o.split(" ")[0]," - ",n," and ",n," - ",c),r.a.createElement(k.a,{data:v,options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{barPercentage:1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)"}}],yAxes:[{gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)"},ticks:{beginAtZero:!0}}]}}}))},N=function(){var e=Object(n.useState)(O()().subtract(7,"d").format("YYYY-MM-DD")),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(O()().format("YYYY-MM-DD")),l=Object(m.a)(o,2),s=l[0],i=l[1],y=Object(n.useState)(),j=Object(m.a)(y,2),k=j[0],D=j[1],C=Object(n.useState)({}),S=Object(m.a)(C,2),N=S[0],Y=S[1],A=Object(n.useState)({}),B=Object(m.a)(A,2),L=B[0],W=B[1],F=Object(n.useState)({}),H=Object(m.a)(F,2),I=H[0],R=H[1],q=Object(n.useState)({}),G=Object(m.a)(q,2),J=G[0],T=G[1],P=Object(n.useState)(),Z=Object(m.a)(P,2),K=Z[0],z=Z[1],V=Object(n.useState)(0),$=Object(m.a)(V,1)[0],Q=Object(n.useState)(!0),U=Object(m.a)(Q,2),X=U[0],ee=U[1];function te(){return ae.apply(this,arguments)}function ae(){return(ae=Object(d.a)(u.a.mark((function e(){var t,n,r,c,o,l,i,d,m,b,p,g,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={query:{start_date:"".concat(a," 00:00:00"),end_date:"".concat(s," 23:59:59")}},n=O.a.duration(O()(s).diff(O()(a))).asDays(),r="".concat(O()().subtract(2*n,"d").format("YYYY-MM-DD")," 00:00:00"),c={query:{start_date:r,end_date:"".concat(a," 23:59:59")}},z(r),k&&(t.query.facility_id=k),o={headers:{Authorization:"Bearer jiMb2jr9d1sGL8Za6Kb4VJnty0K98MqW","Content-Type":"application/json"}},e.next=9,E.a.post("https://erp.sofive.com/report/sales",t,o);case 9:return l=e.sent,e.next=12,E.a.post("https://erp.sofive.com/report/sales",c,o);case 12:i=e.sent,d=l.data,m=i.data,b={},p={},g={},h={},d.map((function(e){return b["".concat(e.product_type.name)]?(b["".concat(e.product_type.name)]++,g["".concat(e.product_type.name)]+=e.amount):(b["".concat(e.product_type.name)]=1,g["".concat(e.product_type.name)]=e.amount),e})),m.map((function(e){return p["".concat(e.product_type.name)]?(p["".concat(e.product_type.name)]++,h["".concat(e.product_type.name)]+=e.amount):(p["".concat(e.product_type.name)]=1,h["".concat(e.product_type.name)]=e.amount),e})),Y(b),R(g),W(p),T(h),ee(!1);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){te(),setInterval((function(){te()}),3e5)}),[$]);return r.a.createElement(b.a,null,r.a.createElement(p.a,null,r.a.createElement(g.a,null,r.a.createElement(h.a,{inline:!0,className:"mt-3"},r.a.createElement(h.a.Group,null,r.a.createElement(h.a.Label,{htmlFor:"startDate"},"Start Date:"),r.a.createElement(h.a.Control,{type:"date",className:"mx-sm-3",id:"startDate",value:a,onChange:function(e){return c(e.target.value)},"aria-describedby":"startDate"})),r.a.createElement(h.a.Group,null,r.a.createElement(h.a.Label,{htmlFor:"endDate"},"End Date:"),r.a.createElement(h.a.Control,{type:"date",className:"mx-sm-3",id:"endDate",value:s,onChange:function(e){return i(e.target.value)},"aria-describedby":"endDate"})),r.a.createElement(h.a.Group,null,r.a.createElement(h.a.Label,{htmlFor:"facilityId"},"Facility id:"),r.a.createElement(h.a.Control,{type:"number",className:"mx-sm-3",id:"facilityId",value:k,onChange:function(e){return D(e.target.value)},"aria-describedby":"facilityId"})),r.a.createElement(f.a,{onClick:function(e){e.preventDefault(),te()},className:"mx-sm-3"},"Submit")))),X&&r.a.createElement(v.a,{animation:"border",className:"mt-5"}),!X&&r.a.createElement("div",null,Object.keys(N).length&&r.a.createElement(M,{data:N}),Object.keys(N).length&&r.a.createElement(x,{data:N,data2:L,rangeStart:K,startDate:a,endDate:s}),Object.keys(N).length&&r.a.createElement(w,{data:N,data2:L,rangeStart:K,startDate:a,endDate:s,revenue:I,revenue2:J}),Object.keys(I).length&&r.a.createElement(_,{data:I})))};var Y=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s,null),r.a.createElement(N,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(237);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,a){e.exports=a(238)}},[[99,1,2]]]);
//# sourceMappingURL=main.2b0ed314.chunk.js.map